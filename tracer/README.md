# `tracer`

Reads trace files generated by FOSSA Rust programs offline,
then emits them in more readable formats with filtering and summarizing.

Different subcommands are intended to read the output of different FOSSA programs,
and will provide summarization and/or user configuration depending on the goal
of those programs.

# installation

0. Have a Rust toolchain installed.
1. Clone this repo: `git clone git@github.com:fossas/foundation-libs.git`
2. cd in and install: `cd foundation-libs && cargo install --bin tracer --path tracer`

# subcommands

## `diagnose`

Parses the result of running the `diagnose` CLI here: https://github.com/fossas/fossa-cli/tree/master/tools/diagnose.

Outputs generalized stats about a diagnostics run.

If you're troubleshooting this output, feel free to modify this to output new information you find useful.
Generally just make sure that only summary data and warnings/errors are printed by default;
for anything else it should be an option.

# help

Run `--help` on the main binary for a list of subcommands, and on a given subcommand for its options.

For example:
```shell
foundation-libs on ‚ëÜ tracer-enhancements [?] via ü¶Ä v1.72.0 took 24s
‚ùØ tracer --help
Reads trace files generated by FOSSA Rust programs offline, then emits them in more readable formats with filtering and summarizing.

Different subcommands are intended to read the output of different FOSSA programs, and will provide summarization and/or user configuration depending on the goal of those programs.

Usage: tracer [OPTIONS] <COMMAND>

Commands:
  diagnose  Parse the traces emitted by the `diagnose` tool in the FOSSA CLI repo, and display summary data relevant to that tool
  help      Print this message or the help of the given subcommand(s)

Options:
      --trace-level <TRACE_LEVEL>
          Set the minimum level for reported logs. Logs below this level are dropped

          [default: info]

          Possible values:
          - off:   Do not emit events
          - error: Emit events that are 'Error' level or higher
          - warn:  Emit events that are 'Warn' level or higher
          - info:  Emit events that are 'Info' level or higher
          - debug: Emit events that are 'Debug' level or higher
          - trace: Emit events that are 'Trace' level or higher

      --trace-spans <TRACE_SPANS>
          Enable reporting span traces. Span traces report on units of work performed by the program

          [default: off]

          Possible values:
          - off:    Do not log span traces
          - new:    One event when the span is created
          - enter:  One event when the span begins executing
          - exit:   One event when the span suspends or finishes executing
          - close:  One event when the span context is dropped after fully executing
          - active: Combination of 'Enter' and 'Exit' events
          - full:   Combination of all events

  -h, --help
          Print help (see a summary with '-h')

  -V, --version
          Print version

foundation-libs on ‚ëÜ tracer-enhancements [?] via ü¶Ä v1.72.0
‚ùØ tracer diagnose --help
Parse the traces emitted by the `diagnose` tool in the FOSSA CLI repo, and display summary data relevant to that tool

Usage: tracer diagnose [OPTIONS] <TRACE_FILE_PATH>

Arguments:
  <TRACE_FILE_PATH>
          The file to read. Must be uncompressed and in ndjson format

Options:
      --output-file-paths
          Specify this flag to cause a log statement on each file that was inspected

      --trace-level <TRACE_LEVEL>
          Set the minimum level for reported logs. Logs below this level are dropped

          [default: info]

          Possible values:
          - off:   Do not emit events
          - error: Emit events that are 'Error' level or higher
          - warn:  Emit events that are 'Warn' level or higher
          - info:  Emit events that are 'Info' level or higher
          - debug: Emit events that are 'Debug' level or higher
          - trace: Emit events that are 'Trace' level or higher

      --trace-spans <TRACE_SPANS>
          Enable reporting span traces. Span traces report on units of work performed by the program

          [default: off]

          Possible values:
          - off:    Do not log span traces
          - new:    One event when the span is created
          - enter:  One event when the span begins executing
          - exit:   One event when the span suspends or finishes executing
          - close:  One event when the span context is dropped after fully executing
          - active: Combination of 'Enter' and 'Exit' events
          - full:   Combination of all events

  -h, --help
          Print help (see a summary with '-h')

  -V, --version
          Print version
```
